Running with gitlab-runner 16.4.1 (d89a789a)
  on test-runner 8GfjiXee, system ID: s_e72cc9c6d3d9
Preparing the "shell" executor 00:00
Using Shell (bash) executor...
Preparing environment 00:00
Running on gitlub-runner.ru-central1.internal...
Getting source from Git repository 00:02
Fetching changes with git depth set to 20...
Initialized empty Git repository in /home/gitlab-runner/builds/8GfjiXee/0/main293/tests/.git/
Created fresh repository.
Checking out a2949e7f as detached HEAD (ref is test_api)...
Skipping Git submodules setup
Executing "step_script" stage of the job script
$ docker build -t $CI_REGISTRY_IMAGE/hello:gitlab-$CI_COMMIT_SHORT_SHA .
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 416B done
#1 DONE 0.1s
#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.1s
#3 [internal] load metadata for docker.io/library/centos:7
#3 DONE 0.6s
#4 [1/6] FROM docker.io/library/centos:7@sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4
#4 DONE 0.0s
#5 [internal] load build context
#5 transferring context: 620B done
#5 DONE 0.0s
#6 [2/6] WORKDIR /python_api
#6 CACHED
#7 [3/6] RUN yum install python3 python3-pip -y
#7 CACHED
#8 [4/6] COPY requirements.txt requirements.txt
#8 CACHED
#9 [5/6] RUN pip3 install -r requirements.txt
#9 CACHED
#10 [6/6] COPY python-api.py python-api.py
#10 CACHED
#11 exporting to image
#11 exporting layers done
#11 writing image sha256:2ce89265ec6649791b58c37defd4c0968a7c4011b9ff231ee9e96afb2f10bcea 0.0s done
#11 naming to registry.gitlab.com/main293/tests/hello:gitlab-a2949e7f 0.0s done
#11 DONE 0.1s
$ docker run --name test_api -d -p 5290:5290 $CI_REGISTRY_IMAGE/hello:gitlab-$CI_COMMIT_SHORT_SHA
b18cb6218f529cde672aca88ee900d964082a0f4f88f9abf0b80de496c2439e8
$ sleep 15
$ curl http://158.160.17.54:5290/get_info
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    56  100    56    0     0  13204      0 --:--:-- --:--:-- --:--:-- 18666
{"version": 3, "method": "GET", "message": "Running !"}
$ docker stop test_api
test_api
$ docker rm test_api
test_api
Cleaning up project directory and file based variables 00:00
Job succeeded